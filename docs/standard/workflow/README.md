---
title: è§„èŒƒå·¥ä½œæµ
description: è§„èŒƒå·¥ä½œæµ
---

## å‰è¨€

> ä¸ä»¥è§„çŸ©ï¼Œä¸èƒ½æˆæ–¹åœ†ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒ

- æé«˜ä»£ç æ•´ä½“çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€å¯å¤ç”¨æ€§ã€å¯ç§»æ¤æ€§å’Œå¯é æ€§ï¼Œè¿™ä¼šä»æ ¹æœ¬ä¸Šé™ä½å¼€å‘æˆæœ¬ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ã€‚
- ä¿è¯ä»£ç çš„ä¸€è‡´æ€§ï¼šè½¯ä»¶ç³»ç»Ÿä¸­æœ€é‡è¦çš„å› ç´ ä¹‹ä¸€å°±æ˜¯ç¼–ç çš„ä¸€è‡´æ€§ã€‚å¦‚æœç¼–ç é£æ ¼ä¸€è‡´ï¼Œä¹Ÿæ›´åŠ æ˜“äºç»´æŠ¤ï¼Œå› ä¸ºå›¢é˜Ÿå†…ä»»ä½•äººéƒ½å¯ä»¥å¿«é€Ÿç†è§£å¹¶ä¿®æ”¹ã€‚
- æå‡å›¢é˜Ÿæ•´ä½“æ•ˆç‡ï¼šå¼€å‘äººå‘˜é€šå¸¸éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´æ¥è§£å†³ä»£ç è´¨é‡é—®é¢˜ï¼Œå¦‚æœéƒ½æŒ‰ç…§è§„èŒƒç¼–å†™ï¼Œä¹Ÿæœ‰åŠ©äºå›¢é˜Ÿå°½æ—©å‘ç°é—®é¢˜ï¼Œç”šè‡³å®Œå…¨é¢„é˜²é—®é¢˜ï¼Œè¿™å°†æé«˜æ•´ä¸ªäº¤ä»˜è¿‡ç¨‹çš„æ•ˆç‡ã€‚
- å‡å°‘ code review æœŸé—´ä¸€ç³»åˆ—çš„äº‰è®®ï¼Œå› ä¸ºç¼ºä¹æ ‡å‡†ï¼Œåœ¨äº‰è®®è¿‡ç¨‹ä¸­åŒæ–¹å¾ˆéš¾å¦¥åï¼ˆæ²¡å°‘å› ä¸ºè¿™äº‹äº‰è®ºè¿‡ ğŸ˜•ï¼‰ã€‚

## å‰ç«¯å·¥ä½œæµå¸¸ç”¨å·¥å…· ğŸ”§

- [Prettier](https://prettier.io/) ä»£ç é£æ ¼å·¥å…·
- [ESLint](https://eslint.org/) æ˜¯ä¸€ä¸ªæ ¹æ®æ–¹æ¡ˆè¯†åˆ«å¹¶æŠ¥å‘Š ECMAScript/JavaScript ä»£ç é—®é¢˜çš„å·¥å…·ï¼Œå…¶ç›®çš„æ˜¯ä½¿ä»£ç é£æ ¼æ›´åŠ ä¸€è‡´å¹¶é¿å…é”™è¯¯ã€‚
- [husky](https://github.com/typicode/husky/) å½“æ‚¨æäº¤æˆ–æ¨é€æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ•´ç†æ‚¨çš„æäº¤æ¶ˆæ¯ã€è¿è¡Œæµ‹è¯•ã€lint ä»£ç ç­‰ã€‚
- [lint-staged](https://prettier.io/) lint-staged æ˜¯ä¸€ä¸ªåœ¨ git æš‚å­˜åŒºä¸Šè¿è¡Œ linters çš„å·¥å…·ï¼Œå®ƒå°†æ ¹æ® package.json ä¾èµ–é¡¹ä¸­çš„ä»£ç è´¨é‡å·¥å…·æ¥å®‰è£…å’Œé…ç½® husky å’Œ lint-staged ï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨æ­¤ä¹‹å‰å®‰è£…ï¼ˆnpm install --save-devï¼‰å¹¶é…ç½®æ‰€æœ‰ä»£ç è´¨é‡å·¥å…·ï¼Œæ¯”å¦‚ Prettier å’Œ ESlintã€‚
- [commitlint](https://prettier.io/) ç”¨æ¥è§„èŒƒæäº¤ä¿¡æ¯çš„
- [commitizen](https://prettier.io/)

## ä»£ç è§„èŒƒ

### ä»£ç æ£€æŸ¥å·¥å…·

JS/TS ä¸»æµçš„å¤§è‡´æœ‰è¿™å‡ ç§ï¼š

- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)
- [Google JavaScript Style Guide](https://google.github.io/styleguide/jsguide.html)
- [Idiomatic JavaScript Style Guide](https://github.com/rwaldron/idiomatic.js)
- [JavaScript Standard Style Guide](https://github.com/standard/standard)
- [jQuery JavaScript Style Guide](https://contribute.jquery.org/style-guide/js/)

æ¯”è¾ƒæ¨èä½¿ç”¨ Airbnb JavaScript Style Guideï¼Œå®ƒåœ¨ Github ä¸Šè¶³æœ‰ 12 ä¸‡ starï¼Œå‡ ä¹è¦†ç›–äº† `JavaScript` çš„æ¯ä¸€é¡¹ç‰¹æ€§ã€‚

å…·ä½“é…ç½®ï¼š

1). å®‰è£…ä¾èµ–

```js
npm install eslint --save-dev
// or
yarn add eslint --dev
```

2). ç”Ÿæˆé…ç½®æ–‡ä»¶

```bash
npm init @eslint/config
// or
yarn create @eslint/config
```

è·Ÿç€ç»ˆç«¯ä¸­çš„æç¤ºï¼ŒæŒ‰ç…§è‡ªèº«éœ€æ±‚ä¸€æ­¥æ­¥é€‰æ‹©å³å¯ã€‚

æœ‰äº†å…·ä½“çš„è§„èŒƒåï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦ä½¿ç”¨å·¥å…·å»çº¦æŸï¼šè¿˜æ˜¯é€šè¿‡åœ¨`git commit`é˜¶æ®µæ ¡éªŒï¼Œè‹¥ä¸é€šè¿‡åˆ™å–æ¶ˆæäº¤ã€‚

é…ç½®ï¼ˆè¿˜æ˜¯åœ¨ `package.json` ä¸­çš„ `lint-staged` ï¼‰ï¼š

```js
  "lint-staged": {
    "**/*": "prettier --write --ignore-unknown", //æ ¼å¼åŒ–
    "src/*": "eslint --ext .js,.ts,.tsx"  //è¿›è¡Œeslintæ ¡éªŒ
  },
```

> æ³¨æ„ï¼š
> è¿™é‡Œå¦‚æœé€‰ç”¨çš„ Typescriptï¼Œåˆ™ä¼šé»˜è®¤ä½¿ç”¨`@typescript-eslint/parser`è§£æå™¨ï¼Œå®˜æ–¹ä¸ºäº†è¿½æ±‚æ›´å¿«çš„è§£æé€Ÿåº¦ï¼Œå¹¶ä¸ä¼šå¯¹.ts æ–‡ä»¶ä¸­çš„ç±»å‹è¿›è¡Œæ£€æŸ¥ï¼Œåªä¼šåšè¯­æ³•æ£€æµ‹ã€‚
> å¦‚æœéœ€è¦å¯¹ç±»å‹ä¹Ÿè¿›è¡Œæ£€æµ‹ï¼Œéœ€è¦åœ¨ extends ä¸­åŠ ä¸Š`plugin:@typescript-eslint/recommended-requiring-type-checking`ã€‚
> ä½†æ˜¯åœ¨ç¬”è€…çš„ä½¿ç”¨ä¸­å‘ç°æ•ˆæœå¹¶ä¸å¥½ï¼Œä¸€äº›åŸºæœ¬çš„ç±»å‹ä¾ç„¶æ£€æµ‹ä¸å‡ºæ¥ï¼Œç´¢æ€§è¿™é‡Œæ¢äº†å¦ä¸€ç§æ–¹å¼ï¼šåœ¨ pre commit ä¸­æ‰§è¡Œ`yarn run tsc`ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯å¯¹é¡¹ç›®ä¸­ ts æ–‡ä»¶è¿›è¡Œç±»å‹æ£€æµ‹ï¼Œé»˜è®¤ä¼šè¯»å–æ ¹ç›®å½•ä¸­çš„`tsconfig.json`é…ç½®ã€‚
> è¿™ç§æ–¹å¼å¹¶ä¸å®Œç¾ï¼Œå®ƒçš„å¼Šç«¯å°±åœ¨äº`å…¨é‡æ£€æµ‹`ï¼Œå¦‚æœé¡¹ç›®ä¸å¤§è¿˜å¥½ï¼Œè‹¥æ˜¯é¡¹ç›®ä»£ç é‡å¤Ÿå¤šï¼Œæ£€æµ‹ 10-20s ä¹Ÿæ˜¯å¸¸æœ‰çš„äº‹ã€‚

æ›´å¤šè¯¦æƒ…æŸ¥çœ‹ [eslint å®˜ç½‘](https://eslint.org/docs/latest/user-guide/getting-started)

### ä»£ç é£æ ¼å·¥å…·

ç”±äºæ¯ä¸ªå¼€å‘è€…çš„ IDE ä¸åŒï¼Œå³ä½¿ IDE ç›¸åŒä¹Ÿä¼šå› ä¸ºæ¯ä¸ªäººçš„é…ç½®ä¸ä¸€æ ·å¯¼è‡´æ ¼å¼åŒ–çš„ç»“æœä¸ä¸€æ ·ã€‚å¦‚ä½•ç¡®ä¿å›¢é˜Ÿå†…å¼€å‘äººå‘˜é‡‡ç”¨ç»Ÿä¸€çš„æ ¼å¼åŒ–é…ç½®å‘¢ï¼Ÿ

è¿™é‡Œç»™æ¨èå¤§å®¶ä½¿ç”¨ [prettier](https://prettier.io/)ï¼Œå®ƒå†…ç½®äº†ä¸€å¥—æ ¼å¼åŒ–çš„è§„åˆ™ï¼Œå…·ä½“é…ç½®ï¼š

1). å®‰è£…ä¾èµ–ï¼š

```js
npm install --save-dev --save-exact prettier
// or
yarn add prettier -D
```

2). åˆ›å»ºä¸€ä¸ªç©ºé…ç½®æ–‡ä»¶ï¼Œè®©ç¼–è¾‘å™¨å’Œå…¶ä»–å·¥å…·çŸ¥é“ä½ æ­£åœ¨ä½¿ç”¨ `Prettier`ï¼š

```js
echo {}> .prettierrc.json
```

3). åˆ›å»ºä¸€ä¸ª`.prettierignore`æ–‡ä»¶ï¼Œè®© Prettier CLI å’Œç¼–è¾‘å™¨çŸ¥é“å“ªäº›æ–‡ä»¶ä¸èƒ½æ ¼å¼åŒ–ï¼Œexampleï¼š

```js
# Ignore artifacts:
dist
build
coverage
```

4). è§£å†³å†²çª

å…¶ä»–ï¼šè‹¥ä½¿ç”¨çš„æ˜¯è„šæ‰‹æ¶å·¥å…·æ­å»ºçš„é¡¹ç›®ï¼Œä¼šè‡ªå¸¦ `eslint` é…ç½®ï¼ˆ`eslintConfig`ï¼‰ã€‚

`prettier` å’Œ `eslint` ä¼šæœ‰ä¸€äº›é…ç½®ä¸Šçš„å†²çªï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦å®‰è£… `eslint-config-prettier` ä»¥ä½¿ `ESLint` å’Œ `Prettier` ç›¸äº’é…åˆï¼Œå®‰è£…å®Œååœ¨`.eslintrc` ä¸­é…ç½®ï¼ˆä»¥ `Create-React-App` ä¸ºä¾‹ï¼‰ï¼š

```sh
yarn add eslint-config-prettier,eslint-plugin-prettier -D
```

```js
  "eslintConfig": {
    "extends": [
      "react-app",
      "react-app/jest",
      "prettier"
    ]
  },
```

è¿™æ ·å°±å¯ä»¥ç”¨"`prettier`"çš„éƒ¨åˆ†è§„åˆ™è¦†ç›–å‰é¢çš„è§„åˆ™ï¼Œè®©å®ƒä»¬éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

5). é…ç½®ç¼–è¾‘å™¨ï¼ˆVScode ä¸ºä¾‹ï¼‰

DE ä¸­å®‰è£… [Prettier-Code Formater](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) æ’ä»¶ï¼š

![1.webp](http://salted-fish-bucket.oss-cn-guangzhou.aliyuncs.com/1.webp)

æ‰¾åˆ° IDE ä¸­è®¾ç½®æ¨¡å—ï¼Œæœç´¢ format On Saveï¼Œå‹¾ä¸Šè¿™ä¸ªå°±å¯ä»¥äº†ã€‚

![2.webp](http://salted-fish-bucket.oss-cn-guangzhou.aliyuncs.com/2.webp)

ç°åœ¨å½“æˆ‘ä»¬ Ctrl + S ä¿å­˜ä»£ç æ—¶ï¼Œæ’ä»¶å°±ä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–äº†ã€‚

è¿™é‡Œæœ‰å°ä¼™ä¼´è¦é—®äº†ï¼Œè¦æ˜¯æœ‰äººå°†æ²¡æœ‰æ ¼å¼åŒ–çš„ä»£ç æäº¤ä¸Šå»æ€ä¹ˆåŠï¼Ÿ
è¿™æ—¶å€™å°±éœ€è¦åœ¨ `git commit` çš„é˜¶æ®µè‡ªåŠ¨å°†æäº¤çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬å€ŸåŠ©å·¥å…· `husky`ï¼Œå®ƒä¸»è¦å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ `git` é˜¶æ®µæ£€æŸ¥æäº¤æ¶ˆæ¯ã€è¿è¡Œæµ‹è¯•ã€æ£€æŸ¥ä»£ç ç­‰ã€‚æ²¡æ¥è§¦è¿‡çš„å°ä¼™ä¼´å¯ä»¥å»å®˜ç½‘äº†è§£ä¸€ä¸‹ï¼Œé…ç½®å¦‚ä¸‹ï¼š

- å®‰è£… `husky` å’Œ â€‹â€‹`lint-staged`ï¼š

```js
npm install --save-dev husky lint-staged
npx husky install
npm set-script prepare "husky install"
npx husky add .husky/pre-commit "npx lint-staged"
// or
yarn add --dev husky lint-staged
npx husky install
npm set-script prepare "husky install"
npx husky add .husky/pre-commit "npx lint-staged"
```

- ç„¶åå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° package.json ä¸­:

```js
{
  "lint-staged": {
    "**/*": "prettier --write --ignore-unknown"
  }
}
```

è¿™æ®µé…ç½®çš„æ„æ€æ˜¯ï¼šå½“æ‰§è¡Œ `git commit` é˜¶æ®µå‰ï¼Œå…ˆæ‰§è¡Œ `lint-staged`ï¼Œ`lint-staged` ä¸­çš„å†…å®¹å°±æ˜¯å¯¹æš‚å­˜åŒºçš„æ–‡ä»¶æ‰§è¡Œæ ¼å¼åŒ–çš„å‘½ä»¤ã€‚

<!-- ## ä»£ç è§„èŒƒä¹‹ CSS è§„èŒƒ

CSS æ£€æŸ¥ä»£ç è§„èŒƒä½¿ç”¨ stylelint æ’ä»¶ï¼Œè§„èŒƒåˆ™æ¨èä½¿ç”¨ [stylelint-config-standard](https://github.com/stylelint/stylelint-config-standard)

1). å®‰è£…

```js
npm install --save-dev stylelint stylelint-config-standard
```

2). åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶`.stylelintrc.json`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```js
{
  "extends": "stylelint-config-standard"
}
```

3). è§£å†³ä¸ prettier é…ç½®çš„å†²çªï¼š

```js
npm install --save-dev stylelint-config-prettier
```

4). å°†ä¸‹é¢é…ç½®å¤åˆ¶åˆ°.stylelintrc.json ä¸­ï¼š

```js
{
  "extends": ["stylelint-config-standard", "stylelint-config-prettier"]
}
```

5). åœ¨ git commitv é˜¶æ®µè¿›è¡Œæ£€æµ‹ï¼š

```js
 "lint-staged": {
    "**/*": "prettier --write --ignore-unknown", //æ ¼å¼åŒ–
    "src/**.{js,jsx,ts,tsx}": "eslint --ext .js,.jsx,.ts,.tsx", //å¯¹jsæ–‡ä»¶æ£€æµ‹
    "**/*.{less,css}": "stylelint --fix" //å¯¹cssæ–‡ä»¶è¿›è¡Œæ£€æµ‹
  },
``` -->

## git è§„èŒƒ

> Git æœ‰å¾ˆå¤šçš„ hooks, è®©æˆ‘ä»¬åœ¨ä¸åŒçš„é˜¶æ®µ,å¯¹ä»£ç è¿›è¡Œä¸åŒçš„æ“ä½œ,æ§åˆ¶æäº¤åˆ°ä»“åº“çš„ä»£ç çš„è§„èŒƒæ€§,å’Œå‡†ç¡®æ€§, ä»¥ä¸‹åªæ˜¯å‡ ä¸ªå¸¸ç”¨çš„é’©å­

### å¸¸ç”¨é’©å­

- **`pre-commit`** åˆ¤æ–­æäº¤çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ
- **`commit-msg`** åˆ¤æ–­ commit ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒ
- **`pre-commit`** æ‰§è¡Œæµ‹è¯•ï¼Œé¿å…å¯¹ä»¥å‰çš„å†…å®¹é€ æˆå½±å“

### å·¥å…·

- husky

## ä»£ç è§„èŒƒä¹‹æ ¼å¼åŒ–è§„èŒƒ

## ä»£ç è§„èŒƒä¹‹è‡ªå®šä¹‰å…¶ä»–è§„èŒƒ

ä¸‹é¢åˆ—ä¸€äº›å›¢é˜Ÿå†…å®šçš„å…¶ä»–è§„èŒƒï¼š

1. å‘½åè§„èŒƒ

å˜é‡çš„å‘½åä¸­åº”å°½é‡å‡å°‘ç¼©å†™çš„æƒ…å†µå‘ç”Ÿï¼Œåšåˆ°è§åçŸ¥æ„ã€‚

```js
// ğŸ‘ è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½çš„ç¼©å†™:
letÂ rContentÂ =Â 'willen';Â 

// ğŸ‘ æ— éœ€å¯¹æ¯ä¸ªå˜é‡éƒ½å†™æ³¨é‡Šï¼Œä»åå­—ä¸Šå°±çœ‹æ‡‚
letÂ firstNameÂ =Â 'jackie';Â 

// ğŸ‘ ä»å‘½åæ— æ³•çŸ¥é“è¿”å›å€¼ç±»å‹
functionÂ showFriendsList()Â {....}Â //Â // æ— æ³•è¾¨åˆ«å‡½æ•°æ„å›¾,è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿˜æ˜¯trueÂ orÂ false?

// ğŸ‘ æ˜ç¡®å‡½æ•°æ„å›¾ï¼Œå¯¹äºè¿”å›true or falseçš„å‡½æ•°ï¼Œæœ€å¥½ä»¥should/is/can/haså¼€å¤´
functionÂ shouldShowFriendsList()Â {...}
functionÂ isEmpty()Â {...}
functionÂ canCreateDocuments()Â {...}
functionÂ hasLicense()Â {...}
functionÂ sendEmailToUser(user)Â {.... } //åŠ¨è¯å¼€å¤´ï¼Œå‡½æ•°æ„å›¾å°±å¾ˆæ˜æ˜¾
```

2. å†™æ³¨é‡Š

åœ¨æ¯ä¸ªæ–‡ä»¶çš„é¡¶éƒ¨æ˜ç¡®è¯´æ˜è¯¥ç»„ä»¶åšä»€ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸šåŠ¡ç†è§£éš¾ç‚¹ç­‰ç­‰ï¼Œå¯¹ä¸šåŠ¡ç‰¹æ®Šå‡½æ•°/å˜é‡ä¹Ÿéœ€è¦å†™æ³¨é‡Š

```js
/**
 * å¯¼èˆªé¡µé¢-å³è¾¹åŒºåŸŸ
 */

const Content=>()=>xxx

constÂ MAX_INPUT_LENGTHÂ =Â 8; //ç”¨äºé™åˆ¶å¯†ç è¾“å…¥æ¡†

function Component(props) {
  return (
    <>
      {/* å¦‚æœç”¨æˆ·æ²¡æœ‰è®¢é˜…åˆ™ä¸å±•ç¤ºå¹¿å‘Š */}
      {user.subscribed ? null : <SubscriptionPlans />}
    </>
  )
}
```

3. å˜é‡å…œåº•

```js
// ğŸ‘ å¯¹äºæ±‚å€¼è·å–çš„å˜é‡ï¼Œæ²¡æœ‰å…œåº•
const { data } = getApiRequest();
data.map((s) => s.id); //æ²¡æœ‰è€ƒè™‘dataå¼‚å¸¸çš„æƒ…å†µï¼Œä»£ç ä¸€è·‘å°±çˆ†ç‚¸

// ğŸ‘ å¯¹äºæ±‚å€¼å˜é‡ï¼Œåšå¥½å…œåº•
const { data = [] } = getApiRequest();
data.map((s) => s?.id); //æ²¡æœ‰è€ƒè™‘dataå¼‚å¸¸çš„æƒ…å†µï¼Œä»£ç ä¸€è·‘å°±çˆ†ç‚¸
```

4. è¾…åŠ©å‡½æ•°å¿…é¡»æ˜¯çº¯å‡½æ•°

```js
// ğŸ‘ ä¸è¦è®©åŠŸèƒ½å‡½æ•°çš„è¾“å‡ºå˜åŒ–æ— å¸¸
function plusAbc(a, b, c) {
  //Â è¿™ä¸ªå‡½æ•°çš„è¾“å‡ºå°†å˜åŒ–æ— å¸¸ï¼Œå› ä¸ºapiè¿”å›çš„å€¼ä¸€æ—¦æ”¹å˜ï¼ŒåŒæ ·è¾“å…¥å‡½æ•°çš„aï¼Œb,cçš„å€¼ï¼Œä½†å‡½æ•°è¿”å›çš„ç»“æœå´ä¸ä¸€å®šç›¸åŒã€‚
  var c = fetch("../api");
  return a + b + c;
}

// ğŸ‘ åŠŸèƒ½å‡½æ•°ä½¿ç”¨çº¯å‡½æ•°ï¼Œè¾“å…¥ä¸€è‡´ï¼Œè¾“å‡ºç»“æœæ°¸è¿œå”¯ä¸€
function plusAbc(a, b, c) {
  //Â åŒæ ·è¾“å…¥å‡½æ•°çš„aï¼Œb,cçš„å€¼ï¼Œä½†å‡½æ•°è¿”å›çš„ç»“æœæ°¸è¿œç›¸åŒã€‚
  return a + b + c;
}
```

5. ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹

```js
// ğŸ‘ ä½¿ç”¨forå¾ªç¯ç¼–ç¨‹
for (i = 1; i <= 10; i++) {
  a[i] = a[i] + 1;
}

// ğŸ‘ ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹
let b = a.map((item) => ++item);
```

6. ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç»„ä»¶

é™¤ééœ€è¦ç”¨åˆ°é”™è¯¯è¾¹ç•Œï¼Œå¦åˆ™å‡½æ•°å¼ç»„ä»¶åº”è¯¥æ˜¯é¦–é€‰æ–¹æ³•ã€‚

7. ç»„ä»¶å¤æ‚åº¦

å¦‚æœä¸€ä¸ªç»„ä»¶åšçš„äº‹æƒ…å¤ªå¤šï¼Œåº”é€‚å½“æå–ä¸€äº›é€»è¾‘ï¼Œå°†å…¶æ‹†åˆ†ä¸ºæ›´å°çš„ç»„ä»¶ã€‚

å¦‚æœæå–çš„ç»„ä»¶å¾ˆå¤æ‚ï¼Œåˆ™éœ€è¦ä¾ç…§ä¸€å®šçš„è§„åˆ™å’Œæ¡ä»¶ä¸€ä¸€æå–å®ƒã€‚

ä»£ç è¡Œæ•°å¹¶ä¸æ˜¯ä¸€ä¸ªå®¢è§‚çš„è¡¡é‡æ ‡å‡†ï¼Œæ›´å¤šæ˜¯éœ€è¦è€ƒè™‘è´£ä»»åˆ’åˆ†å’ŒæŠ½è±¡ã€‚

8. é¿å…åµŒå¥—ä¸‰å…ƒè¿ç®—ç¬¦

ä¸‰å…ƒè¿ç®—ç¬¦åœ¨ç¬¬ä¸€çº§ä¹‹åå˜å¾—éš¾ä»¥é˜…è¯»ï¼Œè™½ç„¶çœ‹èµ·æ¥èŠ‚çœäº†ä»£ç ç©ºé—´ï¼Œä½†æœ€å¥½åœ¨ä»£ç ä¸­æ˜ç¡®æ„å›¾ï¼Œä¿æŒè‰¯å¥½çš„é˜…è¯»æ€§ã€‚

```js
// ğŸ‘ ä¸å¤Ÿæ¸…æ™°ï¼Œè¦æ˜¯å†åµŒå¥—ä¸€å±‚ä¸¤å±‚å‘¢
isSubscribed ? (
  <ArticleRecommendations />
) : isRegistered ? (
  <SubscribeCallToAction />
) : (
  <RegisterCallToAction />
);

// ğŸ‘ å°†åˆ¤æ–­é€»è¾‘è¿›è¡Œæ‹†åˆ†
function CallToActionWidget({ subscribed, registered }) {
  if (subscribed) {
    return <ArticleRecommendations />;
  }

  if (registered) {
    return <SubscribeCallToAction />;
  }

  return <RegisterCallToAction />;
}

function Component() {
  return <CallToActionWidget subscribed={subscribed} registered={registered} />;
}
```

## Git commit è§„èŒƒ

git commit è§„èŒƒä¸»è¦å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨ code review æœŸé—´æ›´å®¹æ˜“ç†è§£æäº¤çš„å†…å®¹ï¼Œç°åœ¨å¤§éƒ¨åˆ†ä¸»æµ commit è§„èŒƒéƒ½æ˜¯åŸºäº[Angular å›¢é˜Ÿçš„è§„èŒƒ](https://github.com/angular/angular.js/blob/master/DEVELOPERS.md)è€Œè¡ç”Ÿå‡ºæ¥çš„ï¼Œå®ƒçš„ message æ ¼å¼å¦‚ä¸‹ï¼š

```html
<type
  >(<scope
    >):
    <subject>
      <BLANK LINE>
        <body>
          <BLANK LINE> <footer></footer></BLANK></body></BLANK></subject></scope
></type>
```

æ¯ä¸ªæäº¤æ¶ˆæ¯éƒ½åŒ…å«ä¸€ä¸ª subjectã€ä¸€ä¸ª body å’Œä¸€ä¸ª footer (ä¸­é—´ä½¿ç”¨ç©ºè¡Œåˆ†å‰²)ï¼Œæäº¤ä¿¡æ¯çš„ä»»ä½•ä¸€è¡Œä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ã€‚
ğŸ‘‰ type ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š

feat: ä¸€ä¸ªæ–°ç‰¹æ€§
fix: ä¿®å¤ bug
docs: æ–‡æ¡£ä¿®æ”¹
style: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºæ ¼ã€æ ¼å¼ã€ç¼ºå°‘åˆ†å·ç­‰ï¼‰
refactor: ä»£ç é‡æ„
perf: ä¼˜åŒ–æ€§èƒ½
test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
chore: å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“çš„æ›´æ”¹ï¼Œä¾‹å¦‚æ–‡æ¡£ç”Ÿæˆ

ğŸ‘‰ scopeï¼šå¯ä»¥æ˜¯å½±å“èŒƒå›´çš„ä»»ä½•å†…å®¹ã€‚
ğŸ‘‰ subjectï¼šåŒ…å«å¯¹æ›´æ”¹çš„ç®€æ´æè¿°ï¼Œè§„åˆ™ï¼š

ä½¿ç”¨é™ˆè¿°è¯­å¥
ç¬¬ä¸€ä¸ªå­—æ¯ä¸è¦å¤§å†™
æœ«å°¾æ²¡æœ‰ç‚¹ (.)

ğŸ‘‰ bodyï¼šcommit å…·ä½“ä¿®æ”¹å†…å®¹, å¯ä»¥åˆ†ä¸ºå¤šè¡Œï¼Œåº”è¯¥åŒ…æ‹¬æ”¹å˜çš„åŠ¨æœºï¼Œå¹¶ä¸ä»¥å‰çš„è¡Œä¸ºè¿›è¡Œå¯¹æ¯”ã€‚
ğŸ‘‰ footer: ä¸€äº›å¤‡æ³¨, é€šå¸¸æ˜¯ä¿®å¤çš„ bug çš„é“¾æ¥ã€‚
æˆªå–ä¸€å¼ å¼€æºåº“çš„ commitï¼Œ[example](https://github.com/nrwl/nx)ï¼š

![3.webp](http://salted-fish-bucket.oss-cn-guangzhou.aliyuncs.com/3.webp)

æœ‰äº†è§„èŒƒåï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å·¥å…·å»çº¦æŸï¼š[commitlint](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fconventional-changelog%2Fcommitlint)ã€‚å®ƒè¦åšçš„å°±æ˜¯åœ¨æˆ‘ä»¬æ¯æ¬¡æäº¤ `git commit` çš„æ—¶å€™ï¼Œéƒ½ä¼šå¸®æˆ‘ä»¬æ£€æŸ¥ `commit message` æ˜¯å¦ç¬¦åˆä¸€å®šçš„è§„èŒƒï¼Œå¦‚æœä¸ç¬¦åˆï¼Œå°±è®©è¿™æ¬¡æäº¤å¤±è´¥ã€‚

å…·ä½“é…ç½®ï¼š

```js
# å®‰è£… commitlint cli å’Œ conventional config
npm install --save-dev @commitlint/{config-conventional,cli}
# Windows:
npm install --save-dev @commitlint/config-conventional @commitlint/cli

é…ç½®è¦ä½¿ç”¨çš„ commitlint è§„åˆ™
echo "module.exports = {extends: ['@commitlint/config-conventional']}" > commitlint.config.js

åŠ å…¥åˆ°huskyä¸­ï¼š
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit "$1"'
or
yarn husky add .husky/commit-msg 'yarn commitlint --edit $1'
```

æ›´å¤šè¯¦æƒ…è§å®˜ç½‘ï¼šgithub.com/conventionaâ€¦

[husky å®˜æ–¹æ–‡æ¡£](https://github.com/typicode/husky)

å½“æ‚¨æäº¤æˆ–æ¨é€æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ•´ç†æ‚¨çš„æäº¤æ¶ˆæ¯ã€è¿è¡Œæµ‹è¯•ã€lint ä»£ç ç­‰ã€‚Husky æ”¯æŒ[æ‰€æœ‰ Git é’©å­](https://git-scm.com/docs/githooks)ã€‚

## ç‰¹å¾

- é›¶ä¾èµ–å’Œè½»é‡çº§ ( 6 kB)
- ç”±ç°ä»£æ–° Git åŠŸèƒ½æä¾›æ”¯æŒ ( core.hooksPath)
- éµå¾ªæœ‰å…³è‡ªåŠ¨å®‰è£…çš„ npm å’Œ Yarn æœ€ä½³å®è·µ
- ç”¨æˆ·å‹å¥½çš„æ¶ˆæ¯
- å¯é€‰å®‰è£…
- å–œæ¬¢å“ˆå£«å¥‡ 4ï¼Œæ”¯æŒ
  - macOSã€Linux å’Œ Windows
  - Git å›¾å½¢ç”¨æˆ·ç•Œé¢
  - è‡ªå®šä¹‰ç›®å½•
  - å•ä½“ä»“åº“

## å®‰è£…

`husky-init`æ˜¯ç”¨ `husky` å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®çš„ä¸€æ¬¡æ€§å‘½ä»¤ã€‚

```sh
npx husky-init && npm install       # npm
npx husky-init && yarn              # Yarn 1
yarn dlx husky-init --yarn2 && yarn # Yarn 2+
pnpm dlx husky-init && pnpm install # pnpm
```

å®ƒå°†è®¾ç½® `husky`ï¼Œä¿®æ”¹`package.json`å¹¶åˆ›å»ºä¸€ä¸ª`pre-commit`æ‚¨å¯ä»¥ç¼–è¾‘çš„ç¤ºä¾‹æŒ‚é’©ã€‚`npm test`é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šåœ¨æ‚¨æäº¤æ—¶è¿è¡Œã€‚

è¦æ·»åŠ å¦ä¸€ä¸ªæŒ‚é’©ï¼Œè¯·ä½¿ç”¨`husky add.`

ä¾‹å¦‚ï¼š

```sh
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit "$1"'
```

_å¯¹äº `Windows` ç”¨æˆ·ï¼Œå¦‚æœæ‚¨åœ¨è¿è¡Œæ—¶çœ‹åˆ°å¸®åŠ©æ¶ˆæ¯`npx husky add` ...ï¼Œè¯·å°è¯•`node node_modules/husky/lib/bin add ...`æ”¹ç”¨ã€‚è¿™ä¸æ˜¯å“ˆå£«å¥‡ä»£ç çš„é—®é¢˜ã€‚_

## lint-staged

**`lint-staged` æ˜¯ä¸€ä¸ªåœ¨ git æš‚å­˜åŒºä¸Šè¿è¡Œ linters çš„å·¥å…·ã€‚**

å®ƒå°†æ ¹æ®`package.json`ä¾èµ–é¡¹ä¸­çš„ä»£ç è´¨é‡å·¥å…·æ¥å®‰è£…å’Œé…ç½® `husky` å’Œ `lint-staged` ï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨æ­¤ä¹‹å‰å®‰è£…ï¼ˆ`npm install --save-dev`ï¼‰å¹¶é…ç½®æ‰€æœ‰ä»£ç è´¨é‡å·¥å…·ï¼Œæ¯”å¦‚`Prettier`å’Œ`ESlint`ã€‚

```js
æ‰§è¡Œ npx lint-staged --help å‘½ä»¤å¯ä»¥çœ‹åˆ°ç›¸å…³çš„æ‰€æœ‰å‚æ•°å¦‚ä¸‹ï¼š
ç”¨æ³•: lint-staged [options]

Options:
  -V, --version                      è¾“å‡ºç‰ˆæœ¬å·
  --allow-empty                      å½“ä»»åŠ¡æ’¤æ¶ˆæ‰€æœ‰åˆ†é˜¶æ®µçš„æ›´æ”¹æ—¶å…è®¸ç©ºæäº¤ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰
  -c, --config [path]                é…ç½®æ–‡ä»¶çš„è·¯å¾„
  -d, --debug                        æ‰“å°å…¶ä»–è°ƒè¯•ä¿¡æ¯ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰
  -p, --concurrent <parallel tasks>  è¦åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æ•°ï¼Œæˆ–è€…ä¸ºfalseåˆ™è¦è¿ç»­è¿è¡Œä»»åŠ¡ï¼ˆé»˜è®¤å€¼ï¼štrueï¼‰
  -q, --quiet                        è‡ªå·±çš„æ§åˆ¶å°è¾“å‡ºï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰
  -r, --relative                     å°†ç›¸å¯¹æ–‡ä»¶è·¯å¾„ä¼ é€’ç»™ä»»åŠ¡ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰
  -x, --shell                        è·³è¿‡ä»»åŠ¡è§£æä»¥æ›´å¥½åœ°æ”¯æŒshellï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰
  -h, --help                         è¾“å‡ºç”¨æ³•ä¿¡æ¯
```

## git commit æäº¤è§„èŒƒ

é€šå¸¸ä½¿ç”¨ Google AnguarJS è§„èŒƒçš„è¦æ±‚ã€‚ æ ¼å¼è¦æ±‚ï¼š

```
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

- `<type>`ä»£è¡¨æŸæ¬¡æäº¤çš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯ä¿®å¤ä¸€ä¸ª `bug` æˆ–æ˜¯å¢åŠ ä¸€ä¸ª `feature`ï¼Œå…·ä½“ç±»å‹å¦‚ä¸‹ï¼š
  | ç±»å‹ | æè¿° |
  | -------- | ------------------------------------------------------- |
  | feat | æ–°å¢ feature |
  | fix | ä¿®å¤ bug |
  | docs | ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ï¼Œæ¯”å¦‚ README, CHANGELOG, CONTRIBUTE ç­‰ç­‰ |
  | style | ä»…ä»…ä¿®æ”¹äº†ç©ºæ ¼ã€æ ¼å¼ç¼©è¿›ã€é€—å·ç­‰ç­‰ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘ |
  | refactor | ä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤ bug |
  | perf | ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ |
  | test | æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ |
  | chore | æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰ |
  | revert | å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ |
- `scope` è¯´æ˜ `commit` å½±å“çš„èŒƒå›´ã€‚`scope` ä¾æ®é¡¹ç›®è€Œå®šï¼Œä¾‹å¦‚åœ¨ä¸šåŠ¡é¡¹ç›®ä¸­å¯ä»¥ä¾æ®èœå•æˆ–è€…åŠŸèƒ½æ¨¡å—åˆ’åˆ†ï¼Œå¦‚æœæ˜¯ç»„ä»¶åº“å¼€å‘ï¼Œåˆ™å¯ä»¥ä¾æ®ç»„ä»¶åˆ’åˆ†ã€‚
- `subject` æ˜¯ `commit` çš„ç®€çŸ­æè¿°ï¼›
- `body` æäº¤ä»£ç çš„è¯¦ç»†æè¿°ï¼›
- `footer` å¦‚æœä»£ç çš„æäº¤æ˜¯ä¸å…¼å®¹å˜æ›´æˆ–å…³é—­ç¼ºé™·ï¼Œåˆ™ `footer` å¿…éœ€ï¼Œå¦åˆ™å¯ä»¥çœç•¥ã€‚

## ç»“æŸè¯­

ç»Ÿä¸€è§„èŒƒçš„æœ€æ ¹æœ¬ç›®çš„æ˜¯ä¸ºäº†ä¿è¯å›¢é˜Ÿæˆå‘˜çš„ä¸€è‡´æ€§ï¼Œä»è€Œå‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
å­¦ä¼šçƒ­çˆ±æ ‡å‡†ï¼Œä½†è¦ç¡®ä¿å®ƒä»¬ä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚å¦‚æœåˆ¶å®šçš„è§„èŒƒä¸é€‚åˆæ‚¨çš„å›¢é˜Ÿï¼Œè¯·ç¡®ä¿å¯ä»¥é€‚åº”å’Œé‡å†™æ‰€éœ€è¦çš„ä»»ä½•è§„åˆ™ã€‚å®ƒå¹¶ä¸æ˜¯è¦å¼ºåˆ¶æ‰§è¡Œä¸€ç§å·¥ä½œæ–¹å¼ï¼Œè€Œæ˜¯ä¸ºäº†å¸®åŠ©ä¿ƒè¿›å›¢é˜Ÿä¹‹é—´çš„äº’åŠ¨ ğŸ‘ğŸ‘ğŸ‘ã€‚
